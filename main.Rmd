---
title: "Oregon LiDAR CHM Mapping Project"
output:
  html_document:
    df_print: paged
---

# Packages

```{r, include=FALSE}
library(dplyr)

library(terra)
library(sf)
# library(httr)
# library(arcpullr) #would be cool if it worked but right now it does not seem to work right 

library(ForestTools)
library(lidR)

library(whitebox)
source("oregon_chm_downloader.r")

```

# Downloading DEM Tiles

```{r}

aoi <- sf::st_read("OregonLidarData.gpkg", layer = "AOI", quiet = TRUE)

chm<- download_oregon_chm(aoi)

plot(chm)

```

# Filter the Veg Shapefiles

```{r}
veg_shapefiles <- st_read("Veg_ShapeFiles/2003-Veg_Siuslaw/veg.shp", quiet = T) 
filtered_veg <- veg_shapefiles %>% filter(YR_ORIG > 1946 & L1_SZCL >9)

```

# Try to download the raster for the first veg shape file 

```{r}
aoi <- filtered_veg[1,]
chm<- download_oregon_chm(aoi, mask = TRUE)

```
